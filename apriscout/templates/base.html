<!doctype html>
<html>

<head>
  <title>{% block title %}Flask App{% endblock %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/base.css') }}">
  {% block head %}{% endblock %}
</head>

<body>
  <nav>
    <a href="{{ url_for('main.home') }}">Home</a>
    {% if current_user.is_authenticated %}
    <a href="{{ url_for('main.logout') }}">Logout</a>
    <a href="{{ url_for('main.apritable', username=current_user.username) }}">My Page</a>
    {% else %}
    <a href="{{ url_for('main.login') }}">Login</a>
    <a href="{{ url_for('main.register') }}">Register</a>
    {% endif %}

    <form action="{{ url_for('main.search_user') }}" method="GET">
      <input type="text" name="search_user">
      <input type="submit" value="search">

    </form>
  </nav>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="flash-container">
        {% for category, message in messages %}
          <div class="flash-message {{ category }}">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}


  {% block content %}{% endblock %}
  <script>
    // setTimeout(() => {
    //   document.querySelectorAll(".flash-message").forEach(el => el.style.display = "none");
    // }, 3000);
    setTimeout(() => {
      document.querySelectorAll(".flash-message").forEach(el => {
        el.classList.add("fade-out");
        setTimeout(() => el.remove(), 2000);  // ‚Üê match CSS timing
      });
    }, 3000);
  </script>


</body>

</html>
